import { resolve } from 'path'

import log from '@dev-xp/log'
import { read, glob } from '@dev-xp/fs'
import parse from '@coregames/parse-pbt'

const args = process.argv.slice(2)

glob(args[0]).then(files =>
    Promise.all(
        files.map(file =>
            read(resolve(file), 'utf-8')
                .then(log.note(file))
                .then(parse)
                .then(log)
        )
    )
)
