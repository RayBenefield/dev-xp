
using. /Verse.org/Assets
using. /Verse.org/Random
using. /Fortnite.com/Devices
using. /Verse.org/Simulation
using. /Fortnite.com/Devices/CreativeAnimation
using. /UnrealEngine.com/Temporary/SpatialMath
using. /Fortnite.com/Devices/CreativeAnimation/InterpolationTypes

using. Tableau
using. TableauDevice
using. TableauEffect
using. TableauResource
using. Vertex

heroes_device<public> := class(creative_device, config_device, side_effect_device):
    @editable AltAction:input_trigger_device = input_trigger_device{}

    GetResources<override>():[]resource= array:
        resource:
            ID := "Heroes"
            Props := map:
                "ONE" => prop_int. Default := 1
                "Hero Label" => prop_str. Default := "Hero"
                "All Hero Types" => prop_strs. Default := HeroTypes.Keys()
                "Heroes" => prop_strs{}
                "Hero Count" => prop_int{ Focus := Path("Heroes"), FN := "Length" }
                "Next Hero Number" => prop_int{ Focus := Path("Hero Count"), FN := "+", Tweak := Path("ONE") }
                "Next Hero ID" => prop_str{ Focus := Path("Hero Label"), FN := "Append", Tweak := Path("Next Hero Number") }
                "Last Hero" => prop_str{ Focus := Path("Heroes"), FN := "Get", Tweak := Path("Hero Count") }
            Abilities := map:
                "Add Random Hero" => ability. Effects := array:
                    Create("Next Hero ID").As("Hero Label")
                    Insert("Next Hero ID").Into("Heroes")
        resource:
            Type := "Hero"
            Props := map:
                "Hero Type" => prop_str{ Focus := Path("Heroes", "All Hero Types"), FN := "Random" }

    GetResourceID<override>()<computes>:?string= option. "Heroes"
    GetPerType<override>()<computes>:?string= false
    GetPerSubType<override>()<computes>:?string= false
    GetSideEffects<override>(State:scoped_state)<suspends>:[]side_effect=
        State.AttachAction("Add Random Hero", AltAction.ReleasedEvent)
        array{}
            # Debug("Hero Count")
            # Debug("Next Hero ID")
