
using. /Verse.org/Simulation
using. /Fortnite.com/Devices

using. Tableau

inventory_cursor_device<public> := class(tableau_device):
    @editable GridID:string = "Grid"
    @editable CursorID:string = "Cursor"

    GetResources<override>():[]resource= array. resource:
        Props := map:
            # "Max Item Count" => Integer of 25
            # "Items" => Strs of for(I:=1..25). "Bottle_14"
            # "Item Count" => Integer of (Path("Items"), "Length")
            # "Maxed" => Bool of (Path("Item Count"), "Int >=", Path("Max Item Count"))
            # "Current Slot" => Integer of Path(GridID, "Selection Number")
            # "Current Item Number" => Integer of (Path(Path("Current Slot"), "Slot Number"))
            # "Current Item Type" => Str of (Path("Items"), "Get", Path("Current Item Number"))
            # "Needs Target" => Bool of Path(Path("Current Item Type"), "Needs Target")
        Actions := map:
            # "Prim Action" => Action of array:
            #     IsTrue("Needs Target").Else("Use Item")
            #     IsTrue("Targets", "Has Targets")
            #     Execute("Section Selector", "Set Targets")
            # "Use Item" => Action of array:
            #     Remove("Current Item Number").From("Inventory", "Items")
            "Move Right" => Action of Execute(GridID, "Increase X")
            "Move Up" => Action of Execute(GridID, "Decrease Y")
            "Move Down" => Action of Execute(GridID, "Increase Y")
            "Move Left" => Action of array:
                IsFalse("Inventory Cursor", "To Shop").Else("Section Selector", "Set Shop")
                Execute(GridID, "Decrease X")
