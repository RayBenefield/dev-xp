import { basename, resolve } from 'path'

import upath from 'upath'
import log from '@dev-xp/log'
import { copy } from '@dev-xp/fs'

const args = process.argv.slice(2)

if (!args[0]) {
    log('You forgot paths dude...')
    process.exit(1)
}

const path = upath.toUnix(args[0]).replace(/c:/i, '/mnt/c')
const dest = resolve(args[1])
const backupDest = resolve(dest, basename(path))
copy(path, dest).catch(() => copy(path, backupDest))
