import { prompt, Separator } from 'inquirer'
import { cyan, red, green } from 'chalk'

export default ({ staged = [], modified = [], untracked = [] }) => {
    let choices = []

    if (staged.length > 0) {
        choices = choices.concat([
            new Separator('---Staged Files----'),
            ...staged.map(file => ({
                name: green(file),
                value: file,
                checked: true,
            })),
        ])
    }

    if (modified.length > 0) {
        choices = choices.concat([
            new Separator('--Modified Files---'),
            ...modified.map(file => ({
                name: red(file),
                value: file,
            })),
        ])
    }

    if (untracked.length > 0) {
        choices = choices.concat([
            new Separator('--Untracked Files--'),
            ...untracked.map(file => ({
                name: cyan(file),
                value: file,
            })),
        ])
    }

    return prompt([
        {
            type: 'checkbox',
            name: 'filesToCommit',
            message: 'What files will we commit?',
            choices,
        },
    ]).then(({ filesToCommit }) => filesToCommit)
}
