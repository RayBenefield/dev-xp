import describe from 'kape'
import recommendVersion from '@semcom/recommend-version'

describe('Recommend Version', recommendVersion, snapshot => {
    snapshot(
        [],
        [{ packages: [{}] }],
        [{ packages: [{ name: 'new' }] }],
        [{ packages: [{ name: 'new', version: '0.0.0' }] }],
        [
            {
                packages: [{ name: 'No changes', version: '0.0.5' }],
            },
        ],
        [
            {
                packages: [{ name: 'patch 0.0.5 to 0.0.6', version: '0.0.5' }],
                changes: [{ scopes: ['patch 0.0.5 to 0.0.6'] }],
            },
        ],
        [
            {
                packages: [{ name: 'patch 0.0.5 to 0.0.6', version: '0.0.5' }],
                changes: [
                    { scopes: ['patch 0.0.5 to 0.0.6'] },
                    { scopes: ['patch 0.0.5 to 0.0.6'] },
                ],
            },
        ],
        [
            {
                packages: [
                    { name: 'Another change happened', version: '0.0.5' },
                ],
                changes: [{ scopes: ['Another non-dependency package'] }],
            },
        ],
        [
            {
                packages: [{ name: 'Dependency Changes', version: '0.0.5' }],
                dependencies: {
                    'Dependency Changes': {
                        local: ['dependency'],
                    },
                },
                changes: [{ scopes: ['dependency'] }],
            },
        ],
        [
            {
                packages: [{ name: 'Dependency Changes', version: '0.0.5' }],
                dependencies: {
                    'Dependency Changes': {
                        local: ['dependency'],
                    },
                },
                changes: [
                    { scopes: ['dependency'] },
                    { scopes: ['dependency'] },
                ],
            },
        ]
    )
})
