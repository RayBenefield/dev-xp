import describe from 'kape'
import recommendVersion from '@semcom/recommend-version'

describe('Recommend Version', recommendVersion, snapshot => {
    snapshot(
        [],
        [{ packageNames: [] }],
        [{ packageNames: ['new'] }],
        [{ packageNames: ['new'], manifests: { new: { version: '0.0.0' } } }],
        [
            {
                packageNames: ['No changes'],
                manifests: { 'No changes': { version: '0.0.5' } },
            },
        ],
        [
            {
                packageNames: ['patch 0.0.5 to 0.0.6'],
                manifests: { 'patch 0.0.5 to 0.0.6': { version: '0.0.5' } },
                changes: [{ scopes: ['patch 0.0.5 to 0.0.6'] }],
            },
        ],
        [
            {
                packageNames: ['patch 0.0.5 to 0.0.6'],
                manifests: { 'patch 0.0.5 to 0.0.6': { version: '0.0.5' } },
                changes: [
                    { scopes: ['patch 0.0.5 to 0.0.6'] },
                    { scopes: ['patch 0.0.5 to 0.0.6'] },
                ],
            },
        ],
        [
            {
                packageNames: ['Another change happened'],
                manifests: { 'Another change happened': { version: '0.0.5' } },
                changes: [{ scopes: ['Another non-dependency package'] }],
            },
        ],
        [
            {
                packageNames: ['Dependency Changes'],
                manifests: { 'Dependency Changes': { version: '0.0.5' } },
                dependencies: {
                    'Dependency Changes': {
                        local: ['dependency'],
                    },
                },
                changes: [{ scopes: ['dependency'] }],
            },
        ],
        [
            {
                packageNames: ['Dependency Changes'],
                manifests: { 'Dependency Changes': { version: '0.0.5' } },
                dependencies: {
                    'Dependency Changes': {
                        local: ['dependency'],
                    },
                },
                changes: [
                    { scopes: ['dependency'] },
                    { scopes: ['dependency'] },
                ],
            },
        ]
    )
})
