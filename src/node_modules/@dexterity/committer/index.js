import git from '@kikd/git'
import range from 'node-range'

export default () => ({
    commit: ({ next, last, configPath, worklogPath }) => {
        const sessions = range(next, last + 1)
            .map(_ => _)
            .join('/')
        const headerMessage = `docs(worklog): Log work for session${
            next !== last ? 's' : ''
        } ${sessions}.`

        return git
            .add([worklogPath, configPath])
            .then(() => git.commit([headerMessage]))
    },
})
