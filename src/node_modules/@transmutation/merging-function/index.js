import isObject from 'lodash.isobject'
import mergeWith from 'lodash.mergewith'

// eslint-disable-next-line complexity
const merger = (obj, value) => {
    if (!value) return obj
    if (!obj) return value
    if (Array.isArray(obj) && Array.isArray(value)) return [...obj, ...value]
    if (Array.isArray(obj) && !Array.isArray(value)) return [...obj, value]
    if (isObject(obj) && !isObject(value)) return obj
    if (isObject(obj) && Array.isArray(value)) return obj
    if (isObject(obj) && isObject(value)) return mergeWith(obj, value, merger)

    return obj
}

export default merger
