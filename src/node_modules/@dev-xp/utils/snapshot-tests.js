import describe from 'kape'
import * as _ from '@dev-xp/utils'

const value = { test: { first: 'pass' } }

describe('Get Property', _.getProp, snapshot => {
    snapshot('normal', [
        ['test.first', value],
        ['test', value],
    ])

    snapshot('bad key/value', [
        ['', value],
        [{}, value],
        [undefined, value],
        ['', undefined],
        [{}, undefined],
        [undefined, undefined],
    ])
})

const pipeline = (initial, operators) => _.$(initial).pipe(operators)
describe('Pipeline Operator', pipeline, snapshot => {
    snapshot('_.$()', [
        [5, [_.multiply(2)]],
        [5, [_.multiply(2), _.multiply(2)]],
        ['str', [_.suffix(' with'), _.suffix(' win')]],
    ])
})
