/* eslint-disable no-console */
import { inspect } from 'util'

import {
    forEach,
    map,
    isObject,
    initial,
    flatten,
    zip,
    constant,
    times,
} from 'lodash'

export const log = (..._) => {
    console.log(..._)
    return _
}

export const deep = (...args) => {
    const inspectOpts = {
        showHidden: false,
        depth: null,
        colors: true,
        maxArrayLength: null,
    }
    const separators = times(args.length, constant(' '))
    const toPrint = initial(flatten(zip(args, separators)))
    const inspectOrNot = _ => (isObject(_) ? inspect(_, inspectOpts) : _)
    const formatted = map(toPrint, inspectOrNot)

    forEach(formatted, _ => process.stdout.write(_))
    console.log()

    return args[0]
}

export const note = (...messages) => _ => {
    log(...messages)
    return _
}

log.deep = deep
log.note = note

export default log
