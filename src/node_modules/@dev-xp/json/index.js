import jsonFile from 'jsonfile'
import editor from 'edit-json-file'
import promisify from 'es6-promisify'

const { readFile, writeFile, writeFileSync } = jsonFile

export const read = promisify(readFile)

const writeJson = promisify(writeFile)
export const write = (file, data) => writeJson(file, data, { spaces: 4 })

export const writeSync = (file, data) =>
    writeFileSync(file, data, { spaces: 4 })

export const edit = (file, location, data) => {
    const json = editor(file, { stringify_width: 4, stringify_eol: true })
    json.set(location, data)
    json.save()
}

export default {
    read,
    write,
    writeSync,
    edit,
}
