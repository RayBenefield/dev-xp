
using { /Fortnite.com/UI }
using { /UnrealEngine.com/Temporary/UI }

responsive_stack_box<public> := class(game_hud):
    GooeyVisibility<public>:gooey_bool = gooey_bool. Latest := true
    Widgets<public>:[]widget = array{}
    Orientation<public>:orientation = orientation.Vertical
    Padding<public>:margin = margin{}

    Initialize<override>():widget=
        Box := stack_box:
            Orientation := orientation.Horizontal
            Slots := for(Widget:Widgets):
                stack_box_slot:
                    Widget := Widget
                    Padding := Padding
        spawn. KeepUpdated(Box)
        Box

    KeepUpdated(Box:stack_box)<suspends>:void=
        Box.SetVisibility(if (GooeyVisibility.Latest?). widget_visibility.Visible else. widget_visibility.Collapsed)
        loop:
            if (1 = 0). break
            block:
                Visible := GooeyVisibility.UpdatedEvent().Await()
                Box.SetVisibility(if (Visible?). widget_visibility.Visible else. widget_visibility.Collapsed)
