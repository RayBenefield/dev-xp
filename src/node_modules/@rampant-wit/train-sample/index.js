import { firestore } from 'firebase-admin'

const { FieldValue } = firestore

export default ({ projectId, api, db }) => (sample, name) =>
    Promise.all([
        api.samples([sample], name),
        db.update(`projects/${projectId}/training/${name || '-negative-'}`, {
            samples: FieldValue.arrayUnion(sample),
        }),
    ])
