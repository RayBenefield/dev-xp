import RenderKid from 'renderkid';
import style from '@kikd/cli-style';
import findRepoRoot from '@kikd/find-repo-root';
import findPackages from '@kikd/find-packages';
import formatPackageList from '@kikd/format-package-list';

const renderer = new RenderKid();
renderer.style(style);

export default {
    ls: () =>
        findRepoRoot()
            .then(root => findPackages({ root }))
            .then(formatPackageList)
            .then(packageList => renderer.render(packageList))
            .then(console.log),
    b: () =>
        findRepoRoot()
            .then(root => findPackages({ root }))
            .then(packages => packages.filter(p => p.bin))
            .then(console.log),
};
