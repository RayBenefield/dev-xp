import 'loud-rejection/register';
import { configure, jsonRenderer } from 'kli';

import style from '@kikd/cli-style';
import packageListTemplate from '@kikd/template-package-list';

import list from '@kikd/command-list';
import check from '@kikd/command-check';
import build from '@kikd/command-build';

const kli = configure({ defaultStyle: style });

const cli = kli({
    commands: [
        {
            name: 'list',
            aliases: ['ls'],
            template: packageListTemplate,
            run: list,
        },
        {
            name: 'check',
            renderer: jsonRenderer,
            run: check,
        },
        {
            name: 'build',
            renderer: () => {},
            run: build,
        },
    ],
});

cli.execute(process.argv.slice(2));
