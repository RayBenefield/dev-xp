
using. /Fortnite.com/Devices
using. /Verse.org/Simulation

using. Numb
using. Tableau
using. TableauResource

plot_config<public> := class(creative_device, config_device):
    GetResources<override>():[]resource= array:
        resource:
            Type := "Plot"
            Props := props:
                Per := map:
                    "Stage" => prop_num{}
                    "Max Stage" => prop_float. Default := 4.0
                    "Plant Type" => prop_str{}
                    "Exists" => prop_bool. Default := true
                    "Watered" => prop_bool. Default := false
                    "Watered Count" => prop_num{}
                    "Growth Time" => prop_float. Default := 5.0
                    "X Coord" => prop_num{}
                    "Y Coord" => prop_num{}
                Computed := map:
                    "Has Plant" => comp_bool{ Focus := Path("Plant Type"), FN := "Not Empty" }
                    "Is Seed" => comp_bool{ Focus := Path("Stage"), FN := "=", Pay := load. Float := 0.0 }
                    "Is Plant" => comp_bool{ FN := "NOT", Focus := Path("Is Seed") }
                    "Not Watered" => comp_bool{ FN := "NOT", Focus := Path("Watered") }
                    "Not Watered Plant" => comp_bool{ Focus := Path("Not Watered"), FN := "AND", Pay := Load(Path("Has Plant")) }
                    "Can Plant" => comp_bool{ FN := "NOT", Focus := Path("Has Plant") }
                    "Can Water" => comp_bool{ Focus := Path("Not Watered Plant"), FN := "AND", Pay := Load(Path("Not Done")) }
                    "Can Harvest" => comp_bool{ Focus := Path("Stage"), FN := "=", Pay := Load(Path("Max Stage")) }
                    "Not Done" => comp_bool{ FN := "NOT", Focus := Path("Can Harvest") }
                    "XY Location" => comp_vec2{ Focus := Path("X Coord"), FN := "Append", Pay := Load(Path("Y Coord")) }
                    "Location" => comp_vec3{ Focus := Path("XY Location"), FN := "Append", Pay := load. Float := 0.0 }
            Abilities := map:
                "Plant" => array:
                    effect{ FN := "Is True", Focus := Path("Can Plant") }
                    effect{ FN := "Set", Focus := Path("Plant Type"), Pay := load. Str := "Tomato" }
                "Water" => array:
                    effect{ FN := "Is True", Focus := Path("Can Water") }
                    effect{ FN := "Make True", Focus := Path("Watered") }
                    effect{ FN := "Increase", Focus := Path("Watered Count"), Pay := load. Float := 1.0 }
                    effect{ FN := "Delay", Focus := Path("Growth Time") }
                    effect{ FN := "Increase", Focus := Path("Stage"), Pay := load. Float := 1.0 }
                    effect{ FN := "Make False", Focus := Path("Watered") }
                "Harvest" => array:
                    effect{ FN := "Is True", Focus := Path("Can Harvest") }
                    effect{ FN := "Set", Focus := Path("Stage"), Pay := load. Float := 0.0 }
                    effect{ FN := "Set", Focus := Path("Plant Type"), Pay := load. Str := "" }
        resource:
            ID := "Farmer"
            Props := props:
                Per := map:
                    "X Coord" => prop_num{}
                    "Y Coord" => prop_num{}
                    "Grid Size" => prop_num. Default := num. Value := 128.0
                    "Count" => prop_num{}
                Computed := map:
                    "X" => comp_num{ Focus := Path("X Coord"), FN := "Multiply", Pay := Load(Path("Grid Size")) }
                    "Y" => comp_num{ Focus := Path("Y Coord"), FN := "Multiply", Pay := Load(Path("Grid Size")) }
                    "XY Location" => comp_vec2{ Focus := Path("X Coord"), FN := "Append", Pay := Load(Path("Y Coord")) }
                    "Location" => comp_vec3{ Focus := Path("XY Location"), FN := "Append", Pay := load. Float := 0.0 }
                    "Plot ID" => comp_str{ Focus := Path("Location"), FN := "To String" }
                    "Can Plant" => comp_bool{ Focus := Path("Plot ID"), FN := "Adopt", Pay := Load(Path("Can Plant")) }
                    "Can Water" => comp_bool{ Focus := Path("Plot ID"), FN := "Adopt", Pay := Load(Path("Can Water")) }
                    "Can Harvest" => comp_bool{ Focus := Path("Plot ID"), FN := "Adopt", Pay := Load(Path("Can Harvest")) }
            Abilities := map:
                "Action" => array:
                    effect{ FN := "Execute Ability", Focus := Path(Path("Plot ID"), "Water") }
                    effect{ FN := "Execute Ability", Focus := Path(Path("Plot ID"), "Plant") }
                    effect{ FN := "Execute Ability", Focus := Path(Path("Plot ID"), "Harvest") }
                    effect{ FN := "Execute Ability", Focus := Path("Create Plot") }
                "Create Plot" => array:
                    effect{ FN := "Create Resource", Focus := Path("Plot ID"), Pay := load. Str := "Plot" }
                    effect{ FN := "Set", Focus := Path(Path("Plot ID"), "X Coord"), Pay := Load(Path("X Coord"))}
                    effect{ FN := "Set", Focus := Path(Path("Plot ID"), "Y Coord"), Pay := Load(Path("Y Coord"))}
                    effect{ FN := "Increase", Focus := Path("Count"), Pay := load. Float := 1.0 }
                "Move Left" => array:
                    effect{ FN := "Decrease", Focus := Path("X Coord"), Pay := load. Float := 128.0 }
                "Move Right" => array:
                    effect{ FN := "Increase", Focus := Path("X Coord"), Pay := load. Float := 128.0 }
                "Move Forward" => array:
                    effect{ FN := "Decrease", Focus := Path("Y Coord"), Pay := load. Float := 128.0 }
                "Move Back" => array:
                    effect{ FN := "Increase", Focus := Path("Y Coord"), Pay := load. Float := 128.0 }
