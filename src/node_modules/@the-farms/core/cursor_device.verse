
using. /Fortnite.com/Devices
using. /Verse.org/Simulation
using. /UnrealEngine.com/Temporary/SpatialMath

using. Tableau
using. TableauDevice

cursor_device<public> := class(creative_device, side_effect_device):
    @editable Prop:creative_prop = creative_prop{}
    @editable Forward:input_trigger_device = input_trigger_device{}
    @editable Left:input_trigger_device = input_trigger_device{}
    @editable Right:input_trigger_device = input_trigger_device{}
    @editable Back:input_trigger_device = input_trigger_device{}
    @editable Action:input_trigger_device = input_trigger_device{}
    @editable WaterIcon:creative_prop = creative_prop{}
    @editable PlantIcon:creative_prop = creative_prop{}
    @editable HarvestIcon:creative_prop = creative_prop{}

    GetResourceID<override>()<computes>:?string= option. "Farmer"
    GetPerType<override>()<computes>:?string= false
    GetPerSubType<override>()<computes>:?string= false
    GetSideEffects<override>(GameState:game_state, ResourceID:string, SubTypeID:string)<suspends>:[]side_effect=
        WaterIcon.Hide()
        HarvestIcon.Hide()
        PlantIcon.Hide()

        if (Ability := GameState.Resources["Farmer"].Abilities["Move Forward"]):
            Forward.ReleasedEvent.Subscribe(Ability.ActionFor(SubTypeID).ExecuteAgentFloat)
        if (Ability := GameState.Resources["Farmer"].Abilities["Move Left"]):
            Left.ReleasedEvent.Subscribe(Ability.ActionFor(SubTypeID).ExecuteAgentFloat)
        if (Ability := GameState.Resources["Farmer"].Abilities["Move Right"]):
            Right.ReleasedEvent.Subscribe(Ability.ActionFor(SubTypeID).ExecuteAgentFloat)
        if (Ability := GameState.Resources["Farmer"].Abilities["Move Back"]):
            Back.ReleasedEvent.Subscribe(Ability.ActionFor(SubTypeID).ExecuteAgentFloat)
        if (Ability := GameState.Resources["Farmer"].Abilities["Action"]):
            Action.ReleasedEvent.Subscribe(Ability.ActionFor(SubTypeID).ExecuteAgentFloat)

        array:
            toggle_prop{ Focus := Path("Farmer", "Can Plant"), Prop := option. PlantIcon }
            toggle_prop{ Focus := Path("Farmer", "Can Water"), Prop := option. WaterIcon }
            toggle_prop{ Focus := Path("Farmer", "Can Harvest"), Prop := option. HarvestIcon }
            move{ Focus := Path("Farmer", "Location"), Prop := option. Prop, Time := 0.2 }
