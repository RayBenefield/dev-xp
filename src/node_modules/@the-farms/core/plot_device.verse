
using. /Verse.org/Simulation
using. /Fortnite.com/Devices

using. Tableau

plot_device<public> := class(tableau_device):
    GetResources<override>():[]resource= array:
        resource:
            Props := map:
                "Stage" => Integer of 0
                "Max Stage" => Integer of 4
                "Plant Type" => Str of ""
                "Exists" => Bool of true
                "Watered" => Bool of false
                "Watered Count" => Num of 0.0
                "Waterings" => Integer of (Path("Max Stage"), "-", Path("Stage"))
                "Growth Time" => Float of Path(Path("Plant Type"), "Growth Time")
                "Plant Stage" => Str of (Path("Plant Type"), "Append", Path("Stage"))
                "Rotation" => Float of ("Random", ANGLE360())
                "Next Stage" => Integer of (Path("Stage"), "+", ONE())
                "Has Plant" => Bool of (Path("Plant Type"), "Not Empty")
                "Is Seed" => Bool of (Path("Stage"), "=", ZERO())
                "Is Plant" => Bool of ("NOT", Path("Is Seed"))
                "Not Watered" => Bool of ("NOT", Path("Watered"))
                "Not Watered Plant" => Bool of (Path("Not Watered"), "AND", Path("Has Plant"))
                "Can Plant" => Bool of ("NOT", Path("Has Plant"))
                "Can Water" => Bool of (Path("Not Watered Plant"), "AND", Path("Not Done"))
                "Can Harvest" => Bool of (Path("Stage"), "=", Path("Max Stage"))
                "Not Done" => Bool of ("NOT", Path("Can Harvest"))
            Actions := map:
                "Action" => Action of array:
                    IsTrue("Can Harvest").Else("Water")
                    Increase("Gold", "Count").By("Reward")
                    Increase("Harvests", "Count").By(ONE())
                    Increase(Path("Plant Type"), "Count").By(ONE())
                    Set("Stage").To(ZERO())
                    Set("Plant Type").To(EMPTY())
                "Water" => Action of array:
                    IsTrue("Can Water").Else("Plant")
                    Set("Watered").To(TRUE())
                    Increase("Watered Count").By(ONE())
                    DelayBy("Growth Time")
                    Set("Stage").To("Next Stage")
                    Set("Watered").To(FALSE())
                "Plant" => Action of array:
                    IsTrue("Can Plant")
                    Set("Plant Type").To("Plant Selector", "Selection")
