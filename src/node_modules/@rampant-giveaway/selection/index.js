import findModules from '@dev-xp/find-modules'
import createModerator from '@rampant/moderator'

export default ({ moderator: chat, db, prefix, logger }) => {
    const moderator = createModerator({
        chat,
        db,
        prefix,
        streamer: 'raybenefield',
    })
    const intents = findModules({ namespace: '@fever' })
    intents
        // eslint-disable-next-line global-require, import/no-dynamic-require
        .map(intent => require(intent).default)
        .forEach(intent => intent({ moderator, db, prefix, logger }))
}
