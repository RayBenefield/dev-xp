import { transmute } from 'transmutation';

import findPackages from '@kikd/find-packages';
import findRepoRoot from '@kikd/find-repo-root';
import findBaseConfig from '@kikd/find-base-config';
import packageListTemplate from '@kikd/template-package-list';

export default function list() {
    return transmute({})
        .extend('root', findRepoRoot)
        .extend('baseConfig', findBaseConfig)
        .extend('exclude', ['**/fixtures/**'])
        .extend('packages', findPackages);
}

export const command = {
    name: 'list',
    aliases: ['ls'],
    template: packageListTemplate,
    run: list,
};
