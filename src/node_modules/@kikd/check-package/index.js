// eslint-disable-next-line complexity
export default async ({
    structure: { files = [] } = {},
    manifest: { main, bin, version } = {},
} = {}) => {
    const hasIndex = files.includes('index.js')
    const hasMain = main ? files.includes(main) : hasIndex
    const hasBin = bin
        ? Object.values(bin).every(file => files.includes(file))
        : true

    const checks = {
        'has readme file': files.includes('readme.md'),
        'has a version number': !!version,
        ...(hasIndex ? { 'has index': hasIndex } : {}),
        ...(main ? { 'has main': hasMain } : {}),
        ...(bin ? { 'has bin': hasBin } : {}),
    }

    return { ...checks, publishable: Object.values(checks).every(pass => pass) }
}
