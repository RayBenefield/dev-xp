// eslint-disable-next-line complexity
export default async ({
    structure: { files = [] } = {},
    manifest: { main, bin, version } = {},
} = {}) => {
    const hasMain = main ? files.includes(main) : files.includes('index.js')
    const hasBin = bin
        ? Object.values(bin).every(file => files.includes(file))
        : true
    const checks = {
        'has readme file': files.includes('readme.md'),
        'has a version number': !!version,
        'has main and/or all bin files':
            main && !bin ? hasMain : bin && !main ? hasBin : hasMain && hasBin,
    }

    return { ...checks, publishable: Object.values(checks).every(pass => pass) }
}
