import checkedPackages from '@kikd/command-check';
import destinationDetails from '@kikd/destination-details';

export default (...args) =>
    checkedPackages(...args)
        .extend('publishable', ({ packages, checks }) =>
            packages
                .filter(pkg => pkg.version)
                .filter(pkg => checks.packages[pkg.name].publishable),
        )
        .extend('destination', destinationDetails);
