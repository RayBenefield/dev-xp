import describe from 'kape'
import list from '@kikd/dependency-list'

const packages = [
    {
        name: 'kikd',
        files: ['cli.js', 'package.json'],
        bin: {
            kd: 'cli.js',
        },
    },
    {
        name: '@kikd/first',
        files: ['index.js', 'package.json'],
    },
    {
        name: '@kikd/second',
        files: ['index.js', 'package.json'],
    },
    {
        name: '@kikd/third',
        main: 'source.js',
        files: ['source.js', 'package.json'],
    },
]

describe('Dependency List', list, snapshot => {
    process.chdir(__dirname)

    snapshot(
        [],
        [{ root: '.' }],
        [{ root: '.', packages: ['roar'] }],
        [
            {
                root: './fixtures',
                packages,
            },
        ]
        /* ---Real dependencies---
        [
            {
                root: resolve(__dirname, '../../'),
                packages: [
                    { name: 'kikd' },
                    { name: 'kli' },
                    { name: 'kape' },
                ],
            },
        ],
        */
    )
})
