import transmute from 'transmutation';
import parseTags from '@kikd/parse-tags';
import gatherTags from '@kikd/tag-gatherer';
import gatherChanges from '@kikd/change-gatherer';
import latestReleaseTag from '@kikd/latest-release-tag';

export default () =>
    transmute({})
        .extend('rawTags', gatherTags)
        .extend('tags', parseTags)
        .extend('latest', latestReleaseTag)
        .extend('from', ({ latest }) => latest.tag)
        .extend('changes', gatherChanges);
