import describe from 'kape';
import { resolve } from 'path';
import findPackages from '@kikd/find-packages';

const root = dir => ({ root: resolve(__dirname, `fixtures/${dir}`) });
const exclude = (...paths) => ({ exclude: paths });

describe('Find Packages', findPackages, it => {
    it('should capture results', given =>
        given([
            [root('no-modules')],
            [root('no-package-json')],
            [root('empty-package-json')],
            [root('multiple-packages')],
            [
                {
                    ...root('multiple-packages'),
                    ...exclude('**/@module/**'),
                },
            ],
        ]));
});
