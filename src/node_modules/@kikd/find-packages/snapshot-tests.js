import describe from 'kape';
import findPackages from '@kikd/find-packages';

describe('Find Packages', findPackages, it => {
    process.chdir(__dirname);
    const root = dir => ({ root: `./fixtures/${dir}` });
    const exclude = (...paths) => ({ exclude: paths });

    it(given =>
        given([
            [root('no-modules')],
            [root('no-package-json')],
            [root('empty-package-json')],
            [root('multiple-packages')],
            [
                {
                    ...root('multiple-packages'),
                    ...exclude('**/@module/**'),
                },
            ],
        ]),
    );
});
