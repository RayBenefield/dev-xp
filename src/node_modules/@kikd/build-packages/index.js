import { rollup } from 'rollup';

export default ({ configs = [] } = {}) =>
    Promise.all(
        configs.map(config =>
            rollup({
                input: config.input,
                external: config.external,
                plugins: config.plugins,
            }).then(bundle =>
                Promise.all(
                    config.output.map(out =>
                        bundle.write({
                            file: out.file,
                            format: out.format,
                            banner: config.banner,
                        }),
                    ),
                ),
            ),
        ),
    );
