/* eslint-disable no-console */
import { basename } from 'path'

import transmute from 'transmutation'
import template from '@kikd/template-initialize'

function collectInfo() {
    return transmute({})
        .extend('root', process.cwd())
        .extend('monorepoName', ({ root }) => basename(root))
}

export default function initialize() {
    return () => {
        console.log('Initialize Git')
        console.log('Create package.json')
        console.log('Create src/node_modules')
    }
}

export const command = () => ({
    name: 'initialize',
    run: collectInfo,
    effect: initialize,
    template,
    autoCommit: true,
})
