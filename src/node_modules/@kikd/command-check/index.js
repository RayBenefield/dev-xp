import { transmute, isolate } from 'transmutation';

import findPackages from '@kikd/find-packages';
import findRepoRoot from '@kikd/find-repo-root';
import publishCheck from '@kikd/publish-check';
import findBaseConfig from '@kikd/find-base-config';

export default () =>
    transmute({})
        .extend('root', findRepoRoot)
        .extend('baseConfig', findBaseConfig)
        .extend('exclude', ['**/fixtures/**'])
        .extend('packages', findPackages)
        .extend('checks', publishCheck)
        .then(isolate('checks'));
