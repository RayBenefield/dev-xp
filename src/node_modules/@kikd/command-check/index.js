import { transmute, isolate } from 'transmutation';

import findPackages from '@kikd/find-packages';
import findRepoRoot from '@kikd/find-repo-root';
import checkPackages from '@kikd/check-packages';
import findBaseConfig from '@kikd/find-base-config';

export default () =>
    transmute({})
        .extend('root', findRepoRoot)
        .extend('baseConfig', findBaseConfig)
        .extend('exclude', ['**/fixtures/**'])
        .extend('packages', findPackages)
        .extend('checkedPackages', checkPackages)
        .then(isolate('checkedPackages'));
