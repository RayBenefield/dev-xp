import npm from 'npm-utils';
import { resolve } from 'path';

export default ({ root, packages }) => {
    process.chdir(root);
    return npm.setAuthToken().then(() =>
        Promise.all(
            packages.map(pkg => {
                process.chdir(resolve(root, 'dist', pkg.name));
                console.log(`Publishing ${pkg.name}...`);
                return npm.publish();
            }),
        ),
    );
};
