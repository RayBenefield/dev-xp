import buildPackages from '@kikd/build-packages';
import getPublishablePackages from '@kikd/command-publish';
import buildRollupConfigs from '@kikd/build-rollup-configs';

export default function build(...args) {
    return getPublishablePackages(...args).extend('configs', snowball =>
        buildRollupConfigs({ ...snowball, packages: snowball.publishable }),
    );
}

export const command = {
    name: 'build',
    renderer: () => {},
    run: build,
    effect: buildPackages,
};
