import { input, iifeOutput, postInfo, plugins } from '@kikd/rollup-utils';

export default {
    filter: pkg =>
        pkg.files.includes('index.html') && pkg.files.includes('app.js'),
    config: ({ baseConfig, dependencies }) => p => {
        const pkg = { ...p, file: 'app.js' };
        return {
            type: 'vue-site',
            in: input({ pkg, dependencies, plugins: plugins({ vue: true }) }),
            out: [iifeOutput({ pkg })],
            post: postInfo({ pkg, baseConfig, dependencies }),
        };
    },
};
