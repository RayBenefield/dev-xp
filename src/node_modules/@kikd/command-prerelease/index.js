import getCheckedPackages from '@kikd/command-check';
import pickPackage from '@kikd/prompt-pick-package';

export default (...args) =>
    getCheckedPackages(...args)
        .extend('unpublishable', ({ packages, checks }) =>
            packages.filter(pkg => !checks.packages[pkg.name].publishable),
        )
        .extend('package', ({ unpublishable }) =>
            pickPackage({
                message: 'Which package should we prerelease?',
                packages: unpublishable,
            }),
        );
