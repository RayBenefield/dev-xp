import { resolve } from 'path'

import { sync as exists } from 'file-exists'

const cache = {}

export default ({ root, name, structure: { srcDir } }) => {
    if (name in cache) return cache[name]

    const packageJson = resolve(root, srcDir, 'package.json')

    // eslint-disable-next-line global-require, import/no-dynamic-require
    const manifest = exists(packageJson) ? require(packageJson) : {}
    cache[name] = manifest

    return manifest
}
