import describe from 'kape';
import { resolve } from 'path';
import buildConfigs from '@kikd/build-rollup-configs';

const packages = dir => ({
    packages: [
        {
            dir,
            // eslint-disable-next-line global-require, import/no-dynamic-require
            ...require(resolve(__dirname, `fixtures/${dir}/package.json`)),
        },
    ],
});

describe('Build Rollup Configs', buildConfigs, it => {
    it('snapshot', given =>
        given([
            [],
            [{ packages: [] }],
            [packages('no-bin')],
            [packages('non-object-bin')],
            [packages('main')],
            [packages('cli-simple-hello')],
        ]));
});
