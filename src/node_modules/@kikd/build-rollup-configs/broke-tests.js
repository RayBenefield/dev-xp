import describe from 'kape'
import { resolve } from 'path'
import buildConfigs from '@kikd/build-rollup-configs'

describe('Build Rollup Configs', buildConfigs, it => {
    const packages = dir => ({
        packages: [
            {
                dir,
                // eslint-disable-next-line global-require, import/no-dynamic-require
                ...require(resolve(__dirname, `fixtures/${dir}/package.json`)),
            },
        ],
    })

    it('snapshot', given =>
        given([
            [],
            [{ packages: [] }],
            [packages('no-bin')],
            [packages('non-object-bin')],
            [packages('main')],
            [packages('cli-simple-hello')],
        ]))
})
