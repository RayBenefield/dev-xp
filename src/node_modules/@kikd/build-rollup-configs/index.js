export default ({ plugins = {} }) => ({
    packageNames = [],
    baseConfig,
    dependencies,
    structures,
    manifests,
} = {}) =>
    [].concat(
        ...Object.entries(plugins)
            .filter(([, plugin]) =>
                packageNames.some(name => plugin.filter(structures[name]))
            )
            .map(([, plugin]) =>
                [].concat(
                    ...packageNames
                        .filter(name => plugin.filter(structures[name]))
                        .map(name =>
                            plugin.config({
                                baseConfig,
                                dependencies: dependencies[name],
                                structure: structures[name],
                                manifest: manifests[name],
                            })
                        )
                )
            )
    )
