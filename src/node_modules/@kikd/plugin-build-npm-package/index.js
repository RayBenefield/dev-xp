import { input, cjsOutput, postInfo, plugins } from '@kikd/rollup-utils';

export default {
    filter: pkg => !pkg.bin,
    config: ({ baseConfig, dependencies }) => p => {
        const pkg = { ...p, file: p.main || 'index.js' };
        return {
            type: 'npm-package',
            in: input({ pkg, dependencies, plugins: plugins() }),
            out: [cjsOutput({ pkg })],
            post: postInfo({ pkg, baseConfig, dependencies }),
        };
    },
};
