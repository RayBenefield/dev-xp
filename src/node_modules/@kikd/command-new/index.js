/* eslint-disable no-console */
import transmute from 'transmutation'
import findRepoRoot from '@kikd/find-repo-root'
import requestPackageType from '@kikd/request-package-type'

function collectInfo(config) {
    return transmute({})
        .extend('root', findRepoRoot)
        .extend('type', requestPackageType(config))
}

export default function create() {
    // eslint-disable-next-line complexity
    return ({ root }) =>
        console.log(`Creating new package in ${root}/src/node_modules`)
}

export const command = () => ({
    name: 'new',
    run: collectInfo,
    effect: create,
    autoCommit: true,
})
