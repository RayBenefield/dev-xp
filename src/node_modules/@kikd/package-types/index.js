import collapse from '@kikd/collapse'

export default ({ plugins = {} }) => ({ packageNames = [], structures = {} }) =>
    packageNames
        .map(name => [
            name,
            Object.values(plugins).find(({ filter }) =>
                filter(structures[name])
            ),
        ])
        .map(([name, { type = 'unknown' } = {}]) => ({ [name]: type }))
        .reduce(collapse, {})
