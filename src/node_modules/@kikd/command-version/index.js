import { isolate } from 'transmutation';
import getChanges from '@kikd/command-changes';
import getDependencies from '@kikd/command-deps';
import recommendVersions from '@kikd/recommend-version';
import getPublishablePackages from '@kikd/command-publish';

export default (...args) =>
    getPublishablePackages(...args)
        .extend(getChanges(...args).then(isolate(['changes', 'latest'])))
        .extend(
            'dependencies',
            getDependencies(...args).then(isolate('dependencies')),
        )
        .extend('updates', recommendVersions);
