import describe from 'kape';
import dedent from 'dedent';
import parser from '@kikd/commit-parser';

describe('Commit Parser', parser, it => {
    it('snapshot', given =>
        given([
            [],
            [{ commits: [] }],
            [{ commits: ['test', 'false', 'roar', 'not work'] }],
            [
                {
                    commits: [
                        'dx(quality): not sentence cased.',
                        'FEAT(scope): No all caps type.',
                        'fix(test) No colon.',
                        'fix[test]: Brackets instead of parens.',
                        'fix(*, nope): Do not allow asterisk with other scopes.',
                    ],
                },
            ],
            [
                {
                    commits: [
                        'dx(quality): Message to play.',
                        'feat(scope): Dude messages.',
                        'fix(test): Blah of a message.',
                        'fix(multiple, scopes): Blah of a message.',
                        'fix(*): Blah of a message.',
                    ],
                },
            ],
            [
                {
                    commits: [
                        dedent`
                            dx(quality): Message to play.
                            
                            Some body message.
                        `,
                        dedent`
                            feat(scope): Dude messages.
                            
                            The Best body that is multiple lines of stuff
                            like so... as you can see. It is a thing.
                        `,
                        dedent`
                            fix(test): Blah of a message.
                            This body is right after the header.
                        `,
                        dedent`
                            fix(multiple, scopes): Blah of a message.
                            And this one is also multiple lines as well
                            as being directly under the header.
                        `,
                    ],
                },
            ],
            [
                {
                    commits: [
                        dedent`
                            dx(quality): Message to play.
                            
                            Some body message.

                            feat(scope): Dude messages.
                            
                            The Best body that is multiple lines of stuff
                            like so... as you can see. It is a thing.
                        `,
                        dedent`
                            fix(test): Blah of a message.
                            This body is right after the header.
                            fix(multiple, scopes): Blah of a message.
                            And this one is also multiple lines as well
                            as being directly under the header.
                        `,
                    ],
                },
            ],
        ]));
});
