const regex = /^([^A-Z]*)\(((?:[^A-Z*]*)|\*)\): ([^a-z].*\.)$/;

export default ({ commits = [] } = {}) =>
    commits
        .map(commit => commit.match(regex))
        .filter(commit => commit)
        .filter(matches => matches.length > 1)
        .map(([, type, scopes, subject]) => ({
            type,
            scopes,
            subject,
        }))
        .map(commit => ({
            ...commit,
            scopes: commit.scopes.split(',').map(s => s.trim()),
        }));
