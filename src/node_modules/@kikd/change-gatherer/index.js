import parse from '@kikd/commit-parser';
import configureGit from 'simple-git/promise';

const git = configureGit();

// https://git-scm.com/docs/pretty-formats
export default ({ from, to = 'HEAD' } = {}) =>
    git
        .log({
            from,
            to,
            format: {
                hash: '%H',
                message: '%B',
            },
        })
        .then(({ all }) => ({ commits: all }))
        .then(parse);
