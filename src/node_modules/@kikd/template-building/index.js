const buildResult = ({ src, dest, file }) =>
    `<finer>${src} -> ${file || dest}</finer>`

const formatPackage = ({
    post: { name, srcDir, destDir, externals = [] } = {},
    type,
} = {}) => `
        <item>
            <title>${name} (${type})</title>
            <details>${srcDir} -> ${destDir}</details>
            ${externals.length > 0 ? '<finer>-</finer>' : ''}
            ${externals.map(buildResult).join('')}
            ${externals.length > 0 ? '<finer>-</finer>' : ''}
        </item>
   `

export default () => ({ configs }) => `
    <bar>-</bar>
    <h1>Packages to be Built</h1>
    <bar>-</bar>
    <list>
        ${[]
        .concat(...Object.values(configs))
        .map(formatPackage)
        .join('')}
    </list>
`
