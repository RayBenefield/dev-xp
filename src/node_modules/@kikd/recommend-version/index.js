import { lt as lessThan, inc } from 'semver';

export default ({ packages = [] } = {}) => {
    if (packages.length <= 0) return [];
    const results = packages.filter(pkg => pkg.name).map(pkg => {
        if (!pkg.version) {
            return {
                [pkg.name]: {
                    version: '0.0.1',
                },
            };
        }

        if (lessThan(pkg.version, '0.1.0')) {
            return {
                [pkg.name]: {
                    version: inc(pkg.version, 'patch'),
                },
            };
        }

        return {
            [pkg.name]: {
                version: pkg.version,
            },
        };
    });
    return results;
};
