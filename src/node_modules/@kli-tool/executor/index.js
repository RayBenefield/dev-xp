const isPromise = obj =>
    !!obj &&
    (typeof obj === 'object' || typeof obj === 'function') &&
    typeof obj.then === 'function';

export default ({ searcher, defaultRenderer = console.log }) => args => {
    const command = searcher.get(args[0])[0];
    const result = command.run();
    const renderer = command.renderer || defaultRenderer;
    if (isPromise(result)) {
        return result.then(renderer);
    }
    return renderer(result);
};
