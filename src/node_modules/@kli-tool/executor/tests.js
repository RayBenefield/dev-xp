import configure from '@kli-tool/executor';
import describe from '@kikd/tape';

describe('KLI Executor', it => {
    it('run the searched command', assert => {
        configure({
            defaultRenderer: () => {},
            defaultStyle: {},
        })({
            run: () => assert.pass(),
        })();
    });

    it('should run a promise based command', assert => {
        configure({
            defaultRenderer: () => {},
            defaultStyle: {},
        })({
            run: () => new Promise(res => res(assert.pass())),
        })();
    });

    it('should send results of command to a renderer', assert => {
        configure({
            defaultRenderer: result => assert.equal(result, 'pass'),
            defaultStyle: {},
        })({
            run: () => 'pass',
        })();
    });

    it('should send results of a promised command to a renderer', assert => {
        configure({
            defaultRenderer: result => assert.equal(result, 'pass'),
            defaultStyle: {},
        })({
            run: () => new Promise(res => res('pass')),
        })();
    });

    it('should send results of a command to the command specific renderer', assert => {
        configure({
            defaultRenderer: () => assert.fail(),
            defaultStyle: {},
        })({
            run: () => new Promise(res => res('pass')),
            renderer: result => assert.equal(result, 'pass'),
        })();
    });
});
