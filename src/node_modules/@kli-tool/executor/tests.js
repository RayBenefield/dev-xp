import configure from '@kli-tool/executor';
import describe from 'tape-bdd';
import 'loud-rejection/register';
import withBlueTape from 'blue-tape';

const command = c => ({
    searcher: {
        get: () => [c],
    },
});

describe(
    'KLI Executor',
    it => {
        it('run the searched command', assert => {
            const executor = configure(
                command({
                    run: () => assert.pass(),
                }),
            );
            executor(['test']);
        });

        it('should run a promise based command', assert => {
            const executor = configure(
                command({
                    run: () => new Promise(res => res(assert.pass())),
                }),
            );
            executor(['test']);
        });
    },
    withBlueTape,
);
