import searcher from '@kli-tool/searcher';
import describe from 'tape-bdd';
import 'loud-rejection/register';
import withBlueTape from 'blue-tape';

describe(
    'KLI Searcher',
    it => {
        it('allow searching by name', assert => {
            const command = searcher({
                commands: [
                    {
                        name: 'command',
                    },
                ],
            }).get('command')[0];
            assert.equals(command.name, 'command');
        });

        it('allow searching by a short name', assert => {
            const command = searcher({
                commands: [
                    {
                        name: 'command',
                    },
                ],
            }).get('com')[0];
            assert.equals(command.name, 'command');
        });

        it('allow searching by an alias', assert => {
            const command = searcher({
                commands: [
                    {
                        name: 'command',
                        aliases: 'test',
                    },
                ],
            }).get('test')[0];
            assert.equals(command.name, 'command');
        });

        it('allow searching by a short alias', assert => {
            const command = searcher({
                commands: [
                    {
                        name: 'command',
                        aliases: 'test',
                    },
                ],
            }).get('t')[0];
            assert.equals(command.name, 'command');
        });

        it('allow searching by an array of aliases', assert => {
            const command = searcher({
                commands: [
                    {
                        name: 'command',
                        aliases: ['test'],
                    },
                ],
            }).get('test')[0];
            assert.equals(command.name, 'command');
        });
    },
    withBlueTape,
);
