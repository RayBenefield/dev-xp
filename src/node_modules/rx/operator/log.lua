local _ = require('ludash')
local tap = require('rx.operator.tap')

return function(prefix)
    return function(source)
        local log = function(...)
            local args = {...}
            if (type(args[1]) == 'table') then
                local tbl = args[1]
                _.printTable(tbl)
                return
            end
            print(prefix or '', ...)
        end
        return source.pipe(tap(log))
    end
end
