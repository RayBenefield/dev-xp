local expect, printed = require'rx-test'()
local rx, _ = require'rx'()

describe('Filter Operator', function()
    describe('filter()', function()

        it('is included in rx object', function()
            assert.no.is_nil(_.filter)
        end)

        it('filters with nothing is bypassed', function()
            local test_ = rx.of('hello').pipe(_.filter())
            --
            expect(test_).to.produce('hello')
        end)

        it('filters with match go through', function()
            local test_ = rx.of('hello').pipe({
                _.filter(function(val) return val == 'hello' end)
            })
            --
            expect(test_).to.produce('hello')
        end)

        it('filters not matching get filtered out', function()
            local test_ = rx.of('hello').pipe({
                _.filter(function(val) return val == 'world' end)
            })
            --
            expect(test_).to.produce()
        end)

    end)
end)
