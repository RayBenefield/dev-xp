local operate = require('rx.operators.operate')
local createObserver = require('rx.observer.create')

return function(count)
    return operate(function(source, destination)
        local next

        if (not count) then
            return source.subscribe(destination)
        end

        if (count <= 0) then
            next = function()
                destination.complete()
            end
        end

        source.subscribe(createObserver(destination, next))
    end)
end
