local createObserver = require('rx.observer.create')

local hasLift = function(source)
    return type(source) == 'table'
        and type(source.lift) == 'function'
end

return function(init)
    return function(source)
        if (hasLift(source)) then
            return source.lift(function(this, liftedSource)
                return init(liftedSource, this)
            end)
        end
    end
end
