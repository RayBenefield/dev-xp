local create = require('rx.observable.create')

return function()
    return function(source)
        return create(function(destination)
            source.subscribe(
                function(...)
                    local args = {...}
                    for _, arg in pairs(args) do
                        if (type(arg) == 'table') then
                            print('('..tostring(arg)..') {')
                            for key, val in pairs(arg) do
                                print('    ['..key..'] = '..tostring(val))
                            end
                            print('}')
                        else
                            print(...)
                        end
                    end
                    destination.next(...)
                end,
                destination.err,
                destination.complete
            )
        end)
    end
end
