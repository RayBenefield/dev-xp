local assert = require('luassert')

return function(table, checkKeys)
    local checkKeys = checkKeys or false
    local count = 1
    local valTable = {}
    local keyTable = {}

    local current = 1
    for key, val in pairs(table) do
        valTable[current] = val
        keyTable[current] = key
        current = current + 1
    end

    return function(val, key)
        assert.are.equal(valTable[count], val)
        if (checkKeys) then
            assert.are.equal(keyTable[count], key)
        end
        count = count + 1
    end
end
