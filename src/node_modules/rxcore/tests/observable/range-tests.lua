local expect, printed = require'rx-test'()
local rx, _ = require'rx'()

describe('Range Creation Operator', function()
    describe('range()', function()

        it('is included in rx object', function()
            assert.no.is_nil(rx.range)
        end)

        it('handles a start to last', function()
            local test_ = rx.range(3, 6)
            --
            expect(test_).to.produce(3, 4, 5)
        end)

        it('handles a start to last in reverse', function()
            local test_ = rx.range(5, 2, -1)
            --
            expect(test_).to.produce(5, 4, 3)
        end)

        it('allows an inclusive positive', function()
            local test_ = rx.range(2, 5, 1, true)
            --
            expect(test_).to.produce(2, 3, 4, 5)
        end)

        it('allows an inclusive negative', function()
            local test_ = rx.range(5, 2, -1, true)
            --
            expect(test_).to.produce(5, 4, 3, 2)
        end)

        it('replaces 0 increment with 1', function()
            local test_ = rx.range(3, 6, 0, true)
            --
            expect(test_).to.produce(3, 4, 5, 6)
        end)

        it('allows an inclusive with large steps', function()
            local test_ = rx.range(0, 7, 3, true)
            --
            expect(test_).to.produce(0, 3, 6)
        end)

    end)
end)

