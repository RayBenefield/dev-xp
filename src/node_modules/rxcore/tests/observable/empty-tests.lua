local expect, printed = require'rx-test'()
local rx, _ = require'rx'()

describe('Empty Creation Operator', function()
    describe('empty()', function()

        it('is included in rx object', function()
            assert.no.is_nil(rx.empty)
        end)

        it('does not call next', function()
            local test_ = rx.empty()
            --
            expect(test_).to.produce()
        end)

        it('cuts off an observable', function()
            local test_ = rx.from({2, 3, 4})
            .pipe({
                _.mergeMap(function() return rx.empty() end)
            })
            --
            expect(test_).to.produce()
        end)

        it('constant variant works properly', function()
            local test_ = rx.from({2, 3, 4})
            .pipe({
                _.mergeMap(function() return rx.EMPTY end)
            })
            --
            expect(test_).to.produce()
        end)

    end)
end)
