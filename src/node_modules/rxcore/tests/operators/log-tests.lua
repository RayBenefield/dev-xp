local expect, printed = require('rx-test')()

local rx = require('rx')
local of = require('rx.observable.of')
local from = require('rx.observable.from')
local log = require('rx.operators.log')

describe('Log Operator', function()
    describe('log()', function()
        it('is included in rx object', function()
            assert.no.is_nil(rx.operators.log)
        end)

        it('handles single value', function()
            local test_ = of('hello')

            expect(test_.pipe(log())).to.produce('hello')
            printed(1)
        end)

        it('handles multiple values', function()
            local test_ = from({'hello', 'world', 'today'})

            expect(test_.pipe(log())).to.produce('hello', 'world', 'today')
            printed(3)
        end)

        it('handles double log operators', function()
            local test_ = of('hello')

            expect(test_.pipe(log(), log())).to.produce('hello')
            printed(2)
        end)

        it('allows a table of operators', function()
            local test_ = of('hello')

            expect(test_.pipe({ log(), log() })).to.produce('hello')
            printed(2)
        end)
    end)
end)
