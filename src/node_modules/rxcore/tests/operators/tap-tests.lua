local expect, printed = require'rx-test'()

local rx, _ = require'rx'()
local of = require('rx.observable.of')
local from = require('rx.observable.from')
local tap = require('rx.operators.tap')

describe('Tap Operator', function()
    describe('tap()', function()

        it('is included in rx object', function()
            assert.no.is_nil(rx.operators.tap)
        end)

        it('handles single value', function()
            local test_ = of('hello').pipe(tap(print))

            expect(test_).to.produce('hello')
            printed(1)
        end)

        it('handles multiple values', function()
            local test_ = from({'hello', 'world', 'today'}).pipe(tap(print))

            expect(test_).to.produce('hello', 'world', 'today')
            printed(3)
        end)

    end)
end)
