local assert = require('luassert')
local assertAll = require('assert-all')

local rx = require('rx')
local from = require('rx.observable.from')
local buffer = require('rx.operators.buffer')
local log = require('rx.operators.log')

describe('Buffer Operator', function()
    describe('buffer()', function()
        it('is included in rx object', function()
            assert.no.is_nil(rx.operators.buffer)
        end)

        it('handles multiple values', function()
            local test_ = from({'world', 'folks', 'people'})
            local check = assertAll({'world', 'folks', 'people'})

            test_.pipe(
                buffer(3)
            ).subscribe(function(val)
                for key, val in pairs(val) do
                    check(val)
                end
            end)
        end)
    end)
end)
