local expect, printed = require'rx-test'()
local rx, _ = require'rx'()

describe('Buffer Operator', function()
    describe('buffer()', function()

        it('is included in rx object', function()
            assert.no.is_nil(_.buffer)
        end)

        it('handles multiple values', function()
            local test_ = rx.from({'world', 'folks', 'people'})
                .pipe(_.buffer(3))
            --
            expect(test_).to.produce({'world', 'folks', 'people'})
        end)

        it('flushes the buffer on completion regardless of size', function()
            local test_ = rx.from({'world', 'folks'})
                .pipe(_.buffer(3))
            --
            expect(test_).to.produce({'world', 'folks'})
        end)

    end)
end)
