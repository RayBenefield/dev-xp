local expect, printed = require'rx-test'()

local rx, _ = require'rx'()

describe('Map Operator', function()
    describe('map()', function()
        it('is included in rx object', function()
            assert.no.is_nil(_.map)
        end)

        it('maps with nothing is bypassed', function()
            local test_ = rx.of('hello').pipe(_.map())

            expect(test_).to.produce('hello')
        end)

        it('handles single value', function()
            local test_ = rx.of('world')
                .pipe({
                    _.map(function(str) return 'hello ' .. str end),
                })

            expect(test_).to.produce('hello world')
        end)

        it('handles multiple values', function()
            local test_ = rx.from({'world', 'folks', 'people'})
                .pipe({
                    _.map(function(str) return 'hello ' .. str end),
                })

            expect(test_).to.produce('hello world', 'hello folks', 'hello people')
        end)
    end)
end)
