
using. /Verse.org/Simulation
using. /Fortnite.com/Devices

number_device_v0_1<public> := class(tableau_device):
    DeviceType<override>:string = "NUMBER"

    @editable Starting:int_plug = int_plug{}
    @editable Interval:int_plug = int_plug{}
    @editable NumberMin:?int_plug = false
    @editable NumberMax:?int_plug = false

    GetResources<override>():[]resource= array. resource:
        Props := map:
            "Zero Based Value" => Integer of (Path("Value"), "-", ONE())
            "Value" => Integer of Starting.Default
            "Down Value" => Integer of (Path("Value"), "-", Path("Interval"))
            "Up Value" => Integer of (Path("Value"), "+", Path("Interval"))
            "Starting" => Integer of Starting
            "Interval" => Integer of Interval
            "Has Min" => PlugCheck of NumberMin
            "Has Max" => PlugCheck of NumberMax
            "Min" => (Integer of NumberMin?) or (Integer of 0)
            "Max" => (Integer of NumberMax?) or (Integer of 0)
            "At Min" => Bool of (Path("Value"), "Int <=", Path("Min"))
            "At Max" => Bool of (Path("Value"), "Int >=", Path("Max"))
            "Min Value" => Integer of (Path("At Min"), "If True", Path("Min"))
            "Max Value" => Integer of (Path("At Max"), "If True", Path("Max"))
            "Prev Value" => Integer of (Path("Min Value"), "If Zero", Path("Down Value"))
            "Next Value" => Integer of (Path("Max Value"), "If Zero", Path("Up Value"))
        Actions := map:
            "Increment" => Action of Set("Value").To("Next Value")
            "Decrement" => Action of Set("Value").To("Prev Value")
            "Reset" => Action of Set("Value").To("Starting")
