
using. /Verse.org/Simulation
using. /Fortnite.com/Devices

number_device_v0_1<public> := class(tableau_device):
    DeviceType<override>:string = "NUMBER"

    @editable Starting:int_plug = int_plug{}
    @editable Interval:int_plug = int_plug{}
    @editable NumberMin:?int_plug = false
    @editable NumberMax:?int_plug = false
    @editable ResetWhenCapped:bool_plug = bool_plug{}

    GetResources<override>():[]resource= array. resource:
        Props := map:
            "Zero Based Value" => Integer of (Path("Value"), "-", ONE())
            "Value" => Integer of Starting.Default
            "Down Value" => Integer of (Path("Value"), "-", Path("Interval"))
            "Up Value" => Integer of (Path("Value"), "+", Path("Interval"))
            "Starting" => Integer of Starting
            "Interval" => Integer of Interval
            "Reset When Capped" => Bool of ResetWhenCapped
            "Has Min" => PlugCheck of NumberMin
            "Has Max" => PlugCheck of NumberMax
            "Min" => (Integer of NumberMin?) or (Integer of 0)
            "Max" => (Integer of NumberMax?) or (Integer of 0)
            "Is Min" => Bool of (Path("Value"), "Int <=", Path("Min"))
            "Is Max" => Bool of (Path("Value"), "Int >=", Path("Max"))
            "Min Value" => Integer of (Path("Is Min"), "If True", Path("Min"))
            "Max Value" => Integer of (Path("Is Max"), "If True", Path("Max"))
            "Prev Value" => Integer of (Path("Min Value"), "If Zero", Path("Down Value"))
            "Next Value" => Integer of (Path("Max Value"), "If Zero", Path("Up Value"))
        Actions := map:
            "Increment" => Action of array:
                IsFalse("Is Max").Else("Capped Reset")
                Set("Value").To("Next Value")
            "Decrement" => Action of array:
                IsFalse("Is Min").Else("Capped Reset")
                Set("Value").To("Prev Value")
            "Capped Reset" => Action of array:
                IsTrue("Reset When Capped")
                Execute("Reset")
            "Reset" => Action of Set("Value").To("Starting")
