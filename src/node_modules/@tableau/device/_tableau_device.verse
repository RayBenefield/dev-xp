
using. /Verse.org/Simulation
using. /Fortnite.com/Devices

using. Tableau

per_resource<public> := class<concrete>(side_effect_settings):
    @editable PerResource<override>:logic = true
side_effect_settings<public> := class<concrete>():
    @editable PerResource<public>:logic = false
    @editable SubResourceID<public>:string = "Player"
    @editable PerSubResource<public>:logic = true

device_settings<public> := class<concrete>():

tableau_device<public> := class(creative_device, config_device, side_effect_device):
    @editable ResourceID<public>:string = "Resource ID"
    @editable SideEffectSettings<public>:side_effect_settings = side_effect_settings{}
    # REQUEST: Doesn't work in the details panel, should be overridable in the future
    # @editable Settings<public>:device_settings = device_settings{}

    GetResources<override>():[]resource= array{}

    GetResourceID<override>()<computes>:?string= if (not SideEffectSettings.PerResource?). option{ ResourceID } else. false
    GetPerType<override>()<computes>:?string= if (SideEffectSettings.PerResource?). option{ ResourceID } else. false
    GetPerSubType<override>()<computes>:?string= if (SideEffectSettings.PerSubResource?). option{ SideEffectSettings.SubResourceID } else. false
    GetSideEffects<override>(State:scoped_state)<suspends>:[]side_effect= array{}
