
using. /Fortnite.com/Devices
using. /Verse.org/Simulation

using. Vertex

contextual_property<public> := class<concrete>():
    @editable Name:string = "Property Name"
    @editable Rename:?string = false
    @editable Type:prop_type = prop_type.StrType

context_device<public> := class(tableau_device):
    @editable ResourceID<override>:string = "Context"
    @editable ContextSource<public>:prop_path = prop_path{}
    @editable Actions<public>:[]string = array{}
    @editable Properties<public>:[]contextual_property = array{}

    GetResources<override>():[]resource= array. resource:
        ID := ResourceID
        Props := CombineAll of array:
            map{ "Context" => Str of ContextSource }
            CreateMap of for(Prop:Properties). case(Prop.Type):
                _ => (Prop.Rename? or Prop.Name, Str of Path(Path("Context"), Prop.Name))
        Actions := CreateMap of for(AID:Actions). (AID, Action of (Path("Context"), AID))
