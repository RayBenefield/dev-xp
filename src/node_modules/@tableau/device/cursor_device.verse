
using. /Fortnite.com/Devices
using. /Verse.org/Simulation
using. /UnrealEngine.com/Temporary/SpatialMath

using. Vertex

cursor_device<public> := class(creative_device, config_device, side_effect_device):
    @editable GridSettings:grid_settings = grid_settings{}
    @editable CursorSettings:cursor_settings = cursor_settings{}

    GetResources<override>():[]resource= array:
        CreateGridResource(GridSettings)
        CreateCursorResource(CursorSettings)
        resource:
            ID := "North"
            Actions := map:
                "Move Right" => Action of Execute(GridSettings.ID, "Increase X")
                "Move Left" => Action of Execute(GridSettings.ID, "Decrease X")
                "Move Up" => Action of Execute(GridSettings.ID, "Increase Y")
                "Move Down" => Action of Execute(GridSettings.ID, "Decrease Y")
        resource:
            ID := "South"
            Actions := map:
                "Move Right" => Action of Execute(GridSettings.ID, "Decrease X")
                "Move Left" => Action of Execute(GridSettings.ID, "Increase X")
                "Move Up" => Action of Execute(GridSettings.ID, "Decrease Y")
                "Move Down" => Action of Execute(GridSettings.ID, "Increase Y")
        resource:
            ID := "West"
            Actions := map:
                "Move Right" => Action of Execute(GridSettings.ID, "Increase Y")
                "Move Left" => Action of Execute(GridSettings.ID, "Decrease Y")
                "Move Up" => Action of Execute(GridSettings.ID, "Decrease X")
                "Move Down" => Action of Execute(GridSettings.ID, "Increase X")
        resource:
            ID := "East"
            Actions := map:
                "Move Right" => Action of Execute(GridSettings.ID, "Decrease Y")
                "Move Left" => Action of Execute(GridSettings.ID, "Increase Y")
                "Move Up" => Action of Execute(GridSettings.ID, "Increase X")
                "Move Down" => Action of Execute(GridSettings.ID, "Decrease X")

    GetResourceID<override>()<computes>:?string= option. CursorSettings.ID
    GetPerType<override>()<computes>:?string= false
    GetPerSubType<override>()<computes>:?string= option. "Player"
    GetSideEffects<override>(State:scoped_state)<suspends>:[]side_effect= FilterOptions of array:
        option. PushVec3("Location", Move(CursorSettings.Prop? and CursorSettings.Prop, 0.2).FN)
        # Debug("X", "{ResourceID} X")
        # Debug("Y", "{ResourceID} Y")
        # Debug("Location", "{ResourceID} Location")
        # Debug("Location ID", "{ResourceID} Location ID")
