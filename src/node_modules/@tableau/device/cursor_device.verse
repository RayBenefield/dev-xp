
using. /Fortnite.com/Devices
using. /Verse.org/Simulation
using. /UnrealEngine.com/Temporary/SpatialMath

using. Vertex

cursor_device<public> := class(tableau_device):
    @editable ResourceID<override>:string = "Cursor"
    @editable GridID:string = "Grid"
    @editable GridSettings:grid_settings = grid_settings{}
    @editable CursorSettings:cursor_settings = cursor_settings{}

    GetResources<override>():[]resource= array:
        CreateGridResource(GridID, GridSettings)
        CreateCursorResource(ResourceID, CursorSettings)
        resource:
            ID := "North"
            Actions := map:
                "Move Right" => Action of Execute(GridID, "Increase X")
                "Move Left" => Action of Execute(GridID, "Decrease X")
                "Move Up" => Action of Execute(GridID, "Increase Y")
                "Move Down" => Action of Execute(GridID, "Decrease Y")
        resource:
            ID := "South"
            Actions := map:
                "Move Right" => Action of Execute(GridID, "Decrease X")
                "Move Left" => Action of Execute(GridID, "Increase X")
                "Move Up" => Action of Execute(GridID, "Decrease Y")
                "Move Down" => Action of Execute(GridID, "Increase Y")
        resource:
            ID := "West"
            Actions := map:
                "Move Right" => Action of Execute(GridID, "Increase Y")
                "Move Left" => Action of Execute(GridID, "Decrease Y")
                "Move Up" => Action of Execute(GridID, "Decrease X")
                "Move Down" => Action of Execute(GridID, "Increase X")
        resource:
            ID := "East"
            Actions := map:
                "Move Right" => Action of Execute(GridID, "Decrease Y")
                "Move Left" => Action of Execute(GridID, "Increase Y")
                "Move Up" => Action of Execute(GridID, "Increase X")
                "Move Down" => Action of Execute(GridID, "Decrease X")

    GetSideEffects<override>(State:scoped_state)<suspends>:[]side_effect= FilterOptions of array:
        option. PushVec3("Location", Move(CursorSettings.Prop? and CursorSettings.Prop, 0.2).FN)
        # Debug("X", "{ResourceID} X")
        # Debug("Y", "{ResourceID} Y")
        # Debug("Location", "{ResourceID} Location")
        # Debug("Location ID", "{ResourceID} Location ID")
