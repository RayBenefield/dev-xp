
using. /Fortnite.com/Devices
using. /Verse.org/Simulation
using. /UnrealEngine.com/Temporary/SpatialMath

using. Vertex

CreateCursorResource_v0_1<public><constructor>(ID:string, C:cursor_settings_v0_1) := resource:
    ID := ID
    Props := map:
        "X Scale" => Float of C.XScale
        "Y Scale" => Float of C.YScale
        "Z Scale" => Float of C.ZScale
        "X" => MaybeInteger of C.XSource
        "Y" => MaybeInteger of C.YSource
        "Z" => MaybeInteger of C.ZSource
        "X Coord" => Float of (Path("X"), "*", Path("X Scale"))
        "Y Coord" => Float of (Path("Y"), "*", Path("Y Scale"))
        "Z Coord" => Float of (Path("Z"), "*", Path("Z Scale"))
        "XY Location" => Vec2 of (Path("X Coord"), "Append", Path("Y Coord") )
        "Without Offset" => Vec3 of (Path("XY Location"), "Append", Path("Z Coord") )
        "Offset" => Vec3 of if (P := C.Prop?). P.GetTransform().Translation - V3(C.InitialX * C.XScale, C.InitialY * C.YScale, C.InitialZ * C.ZScale) else. V3()
        "Location" => Vec3 of (Path("Without Offset"), "+", Path("Offset") )

cursor_settings_v0_1<public> := class<concrete>():
    @editable Prop<public>:?creative_prop = false
    @editable XScale<public>:float = 512.0
    @editable YScale<public>:float = 512.0
    @editable ZScale<public>:float = 384.0
    @editable XSource<public>:?prop_path = false
    @editable YSource<public>:?prop_path = false
    @editable ZSource<public>:?prop_path = false
    @editable InitialX<public>:int = 0
    @editable InitialY<public>:int = 0
    @editable InitialZ<public>:int = 0

cursor_device_v0_1<public> := class(tableau_device):
    @editable ResourceID<override>:string = "Cursor"
    @editable Settings:cursor_settings_v0_1 = cursor_settings_v0_1{}

    GetResources<override>():[]resource= array. CreateCursorResource_v0_1(ResourceID, Settings)
