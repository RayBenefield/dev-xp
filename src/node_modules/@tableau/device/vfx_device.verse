
using. /Verse.org/Assets
using. /Fortnite.com/Devices
using. /Verse.org/Simulation
using. /UnrealEngine.com/Assets
using. /UnrealEngine.com/Temporary/SpatialMath

using. Vertex

vfx_controller<public> := class():
    ParticleSystem<public>:?particle_system = false
    var Location<public>:vector3 = vector3{}

    SpawnVFX<public>()<suspends>:void= if (PS := ParticleSystem?). SpawnParticleSystem(PS, Location)
    SetLocation<public>(Value:vector3)<suspends>:void= set Location = Value

vfx_device<public> := class(tableau_device):
    @editable Trigger:?prop_path = false
    @editable Location:?prop_path = false

    ParticleSystem<public>:?particle_system = false

    GetSideEffects<override>(State:scoped_state)<suspends>:[]side_effect=
        VFX := vfx_controller. ParticleSystem := ParticleSystem
        FilterOptions of array:
            option. Push(Trigger?, VFX.SpawnVFX)
            option. PushVec3(Location?, VFX.SetLocation)

