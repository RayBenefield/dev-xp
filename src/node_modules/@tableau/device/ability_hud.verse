
using. /Fortnite.com/UI
using. /Fortnite.com/Devices
using. /Verse.org/Simulation
using. /UnrealEngine.com/Temporary/UI

using. Goo
using. Gooey
using. Tableau

ability_hud<public> := class(creative_device, tableau_device):
    @editable ResourceID:string = ""
    @editable AbilityID:string = ""
    @editable EnabledPropertyID:?string = false
    @editable Label:string = ""
    @editable HUDSettings:canvas_settings = canvas_settings{}

    Init<override>(GameState:game_state)<suspends>:void=
        GameState.AddHUD("Ability HUD", SetupHUD, HUDSettings, ?Clickable := true)

    SetupHUD(GameState:game_state, PlayerID:string):widget=
        EnabledGoo := if (ID := EnabledPropertyID?). GameState.GetBoolProp(ResourceID, ID, PlayerID)
        else. BoolGoo(true)

        Button := gooey_button:
            DefaultText := Label
            EnabledGoo := EnabledGoo
            Action := GameState.GetAbilityExec(ResourceID, AbilityID, PlayerID)
        Button.Initialize()
