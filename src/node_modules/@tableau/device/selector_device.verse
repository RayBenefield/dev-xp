
using. /Fortnite.com/Devices
using. /Verse.org/Simulation
using. /UnrealEngine.com/Temporary/SpatialMath

using. Gooey
using. Tableau
using. TableauDevice
using. TableauEffect
using. TableauResource

selector_device<public> := class(creative_device, config_device):
    @editable ResourceID:string = "Block Selector"
    @editable BlockTypes:[]string = array{}

    GetResources<override>():[]resource= array:
        resource:
            ID := ResourceID
            Props := map:
                "ONE" => prop_int. Default := 1
                "All Types" => prop_strs. Default := BlockTypes
                "Selection" => prop_str{ Focus := Path("All Types"), FN := "Get", Tweak := Path("Next Index") }
                "Next Index" => prop_int. Default := 1
                "New Index" => prop_int{ Focus := Path("Next Index"), FN := "+", Tweak := Path("ONE") }
                "Type Count" => prop_int{ Focus := Path("All Types"), FN := "Length" }
                "Is Last Type" => prop_bool{ Focus := Path("Next Index"), FN := "Int >", Tweak := Path("Type Count") }
            Abilities := map:
                "Next" => ability. Effects := array:
                    Set("Next Index").To("New Index")
                    IsTrue("Is Last Type")
                    Set("Next Index").To("ONE")
