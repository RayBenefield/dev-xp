
using. /Verse.org/Simulation

using. Vertex

check_operation_v0_1 := enum{ And, Or, Not }
ToString(Value:check_operation_v0_1):string= case(Value):
    check_operation_v0_1.And => "AND"
    check_operation_v0_1.Or => "OR"
    check_operation_v0_1.Not => "NOT"

check_property_v0_1 := class<concrete>():
    @editable Name:string = "Property"
    @editable Settings:check_settings_v0_1 = check_settings_v0_1{}
check_settings_v0_1 := class<concrete>():
    @editable Left:bool_plug = bool_plug{}
    @editable Operation:check_operation_v0_1 = check_operation_v0_1.And
    @editable Right:bool_plug = bool_plug{}

check_device_v0_1<public> := class(tableau_device):
    DeviceType<override>:string = "CHECK"

    @editable Values:[]check_property_v0_1 = array{}

    GetResources<override>():[]resource= array. resource:
        Props := CombineAll of array:
            CreateMap of for(P:Values, S := P.Settings). ("{P.Name} Left", Bool of S.Left)
            CreateMap of for(P:Values, S := P.Settings). ("{P.Name} Right", Bool of S.Right)
            CreateMap of for(P:Values, S := P.Settings). (P.Name, Bool of (Path("{P.Name} Left"), "{S.Operation}", Path("{P.Name} Right")))
