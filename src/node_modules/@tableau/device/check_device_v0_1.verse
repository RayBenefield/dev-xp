
using. /Verse.org/Simulation
using. /Fortnite.com/Devices

using. Vertex

check_operation_v0_1 := enum{ And, Or, Not }
ToString(Value:check_operation_v0_1):string= case(Value):
    check_operation_v0_1.And => "AND"
    check_operation_v0_1.Or => "OR"
    check_operation_v0_1.Not => "NOT"

check_property_v0_1 := class<concrete>():
    @editable Name:string = "Property"
    @editable Settings:check_settings_v0_1 = check_settings_v0_1{}
check_settings_v0_1 := class<concrete>():
    @editable LeftSource:prop_path = prop_path{}
    @editable Operation:check_operation_v0_1 = check_operation_v0_1.And
    @editable RightSource:prop_path = prop_path{}

check_device_v0_1<public> := class(tableau_device):
    DeviceType<override>:string = "CHECK"

    @editable Properties:[]check_property_v0_1 = array{}

    GetResources<override>():[]resource= array. resource:
        Props := CombineAll of array:
            CreateMap of for(P:Properties, S := P.Settings). ("{P.Name} Left", Bool of S.LeftSource)
            CreateMap of for(P:Properties, S := P.Settings). ("{P.Name} Right", Bool of S.RightSource)
            CreateMap of for(P:Properties, S := P.Settings). (P.Name, Bool of (Path("{P.Name} Left"), "{S.Operation}", Path("{P.Name} Right")))
