using { Tableau }

execute_ability_effector<public> := class(effector):
    GameState<public>:game_state

    Play<override>(Command:command, Pay:load)<suspends>:?command=
        ResourceID := Command.Subject
        ParticipantID := Command.Target
        AbilityID := Pay.Str

        if (Ability := GameState.Resources[ResourceID].Abilities[AbilityID]):
            Action := Ability.ActionFor(ParticipantID).ExecutePay(Command.Pay)

        return option. Command
