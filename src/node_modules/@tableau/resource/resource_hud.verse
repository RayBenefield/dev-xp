
using { /Fortnite.com/Devices }
using { /Verse.org/Simulation }

using { Tableau }

resource_hud_device<public> := class(creative_device, tableau_device):
    @editable ResourceID:string = ""
    ToMessage<localizes>(Res:string, Count:string):message := "{Res}: {Count}"

    Init<override>(GameState:game_state)<suspends>:void=
        GameState.AddHUD("Resource HUD", SetupHUD)

    SetupHUD(GameState:game_state, ParticipantID:string):game_hud =
        resource_ui. VM := if:
            ParticipantResource := GameState.Participants[ParticipantID].Resources[ResourceID]
            Resource := GameState.Resources[ResourceID]
                Name := Resource.StatProps["Name"]
        then:
            ComputedVM := Computed(Name, ParticipantResource, ToMessage)
            gooey_message. VM := ComputedVM
        else:
            gooey_message{}
