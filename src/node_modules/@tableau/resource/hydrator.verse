
using. /Verse.org/Simulation
using. /UnrealEngine.com/Temporary/SpatialMath

hydrator := class():
    Resource:hydrated_resource
    GenerateOnIdChange<public>:logic

    GenerateResourceEvent<public>:event(resource) = event(resource){}
    GenerateResource():void= GenerateResourceEvent.Signal(Resource.Dehydrate())

    SyncID():id_hydrator= id_hydrator{ Resource := Resource, Hydrator := Self, GenerateOnIdChange := GenerateOnIdChange }
    SyncInt(ID:string):int_hydrator= int_hydrator{ Resource := Resource, PropertyKey := ID }
    SyncString(ID:string):string_hydrator= string_hydrator{ Resource := Resource, PropertyKey := ID }
    SyncVec3(ID:string):vec3_hydrator= vec3_hydrator{ Resource := Resource, PropertyKey := ID }

id_hydrator := class():
    Resource:hydrated_resource
    Hydrator:hydrator
    GenerateOnIdChange:logic
    SetFN(Value:string):void=
        set Resource.ID = Value
        if (GenerateOnIdChange?, Resource.ID <> ""). Hydrator.GenerateResource()

int_hydrator := class():
    PropertyKey:string
    Resource:hydrated_resource
    SetFN(Value:int):void= if. set Resource.IntProperties[PropertyKey] = Value

string_hydrator := class():
    PropertyKey:string
    Resource:hydrated_resource
    SetFN(Value:string):void= if. set Resource.StringProperties[PropertyKey] = Value

vec3_hydrator := class():
    PropertyKey:string
    Resource:hydrated_resource
    SetFN(Value:vector3):void= if. set Resource.Vec3Properties[PropertyKey] = Value
