
using. Numb
using. Tableau

Set<public><constructor>(Focus:string) := effect. Set<constructor>(Path(Focus))
Set<public><constructor>(ResID:string, PropID:string) := effect. Set<constructor>(Path(ResID, PropID))
Set<public><constructor>(ResID:half_path, PropID:string) := effect. Set<constructor>(Path(ResID, PropID))
Set<public><constructor>(ResID:string, PropID:half_path) := effect. Set<constructor>(Path(ResID, PropID))
Set<public><constructor>(ResID:half_path, PropID:half_path) := effect. Set<constructor>(Path(ResID, PropID))
Set<public><constructor>(Focus:half_path) := effect{ FN := "Set", Focus := Focus }

set_effector<public> := class(effector):
    GameState<public>:game_state

    Play<override>(Source:string, Activator:string, Focus:prop_path, Tweak:prop_path)<suspends>:?[]command=
        PropType := GameState.ResourceRepository.GetPropTypes[Tweak.ResourceID][Tweak.PropertyID] or prop_type.Unknown
        case(PropType):
            prop_type.Num =>
                Value := GameState.GetNumProp(Tweak, Activator).Get()
                GameState.GetNumProp(Focus, Activator).Set(Value)
            prop_type.Str =>
                Value := GameState.GetStrProp(Tweak, Activator).Get()
                GameState.GetStrProp(Focus, Activator).Set(Value)
            prop_type.Bool =>
                Value := GameState.GetBoolProp(Tweak, Activator).Get()
                GameState.GetBoolProp(Focus, Activator).Set(Value)
            prop_type.Integer =>
                Value := GameState.GetIntProp(Tweak, Activator).Get()
                GameState.GetIntProp(Focus, Activator).Set(Value)
            prop_type.Agent =>
                Value := GameState.GetAgentProp(Tweak, Activator).Get()
                GameState.GetAgentProp(Focus, Activator).Set(Value)
            prop_type.Float =>
                Value := GameState.GetFloatProp(Tweak, Activator).Get()
                GameState.GetFloatProp(Focus, Activator).Set(Value)
            prop_type.Vec2 =>
                Value := GameState.GetVec2Prop(Tweak, Activator).Get()
                GameState.GetVec2Prop(Focus, Activator).Set(Value)
            prop_type.Vec3 =>
                Value := GameState.GetVec3Prop(Tweak, Activator).Get()
                GameState.GetVec3Prop(Focus, Activator).Set(Value)
            _ => {}

        return option. array{}
