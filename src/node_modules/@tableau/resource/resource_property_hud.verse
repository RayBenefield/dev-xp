
using { /Fortnite.com/Devices }
using { /Verse.org/Simulation }

using { Tableau }

resource_property_hud<public> := class(creative_device, tableau_device):
    @editable ResourceID:string = ""
    ToMessage<localizes>(Name:string, Count:string):message := "{Name}: {Count}"

    Init<override>(GameState:game_state)<suspends>:void=
        GameState.AddHUD("Resource Count HUD", SetupHUD)

    SetupHUD(GameState:game_state, ParticipantID:string):game_hud=
        resource_ui:
            VM := if:
                Name := GameState.Resources[ResourceID].StaticProperties["Name"]
                Count := GameState.Resources[ResourceID].Properties["Count"]
            then:
                CountVM := Map(Count.ValueFor(ParticipantID), ToStr)
                gooey_message. VM := Computed(Name, CountVM, ToMessage)
            else:
                gooey_message{}

    ToStr(Value:num):string = "{Value}"
