
using { /Fortnite.com/Devices }
using { /Verse.org/Simulation }

using { Tableau }

resource_property_hud<public> := class(creative_device, tableau_device):
    @editable ResourceID:int = 0
    @editable PropertyName:string = ""
    ToMessage<localizes>(Name:string, Value:string):message := "{Name}: {Value}"

    Init<override>(GameState:game_state)<suspends>:void=
        Watcher := participant_watcher:
            GameState := GameState
            OnPossessed := SetupUI
        Watcher.Start()

    SetupUI(GameState:game_state, ParticipantID:int, Agent:agent):void=
        if (Property := GameState.Resources[ResourceID].Properties[PropertyName]):
            Value := Property.ValueFor(ParticipantID)
            MessageVM := gooey_message. VM := Computed(Property.Name, Value, ToMessage)
            ResourceUI:resource_ui = resource_ui. VM := MessageVM
            if (Player := player[Agent]). ResourceUI.AddForPlayer(Player)
