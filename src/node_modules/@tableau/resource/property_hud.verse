
using { /Fortnite.com/Devices }
using { /Verse.org/Simulation }
using { /UnrealEngine.com/Temporary/UI }

using { Tableau }

property_hud<public> := class(creative_device, tableau_device):
    @editable ResourceID:string = ""
    @editable PropertyID:string = ""
    @editable Label:string = ""
    @editable Interactable:logic = false
    @editable HUDSettings:canvas_settings = canvas_settings{}
    CombineString(ID:string, Value:string):string := "{ID}: {Value}"

    Init<override>(GameState:game_state)<suspends>:void=
        GameState.AddHUD("Property HUD", SetupHUD, HUDSettings, ?Clickable := Interactable)

    SetupHUD(GameState:game_state, PlayerID:string):widget=
        PropVM := GameState.GetStrProp(ResourceID, PropertyID, PlayerID)
        LabelVM := gooey_string{}
        spawn. LabelVM.Init(Label)
        Combined := gooey_string. VM := Computed(LabelVM, PropVM, CombineString)
        MustInit := responsive_text_block. GooeyText := Combined
        MustInit.Initialize()
