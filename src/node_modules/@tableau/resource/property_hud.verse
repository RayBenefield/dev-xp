
using { /Fortnite.com/Devices }
using { /Verse.org/Simulation }

using { Tableau }

property_hud<public> := class(creative_device, tableau_device):
    @editable ResourceID:string = ""
    @editable PropertyID:string = ""
    @editable Label:string = ""
    @editable Interactable:logic = false
    @editable HUDSettings:canvas_settings = canvas_settings{}
    CombineString(ID:string, Value:string):string := "{ID}: {Value}"

    Init<override>(GameState:game_state)<suspends>:void=
        GameState.AddHUD("Property HUD", SetupHUD, HUDSettings, ?Clickable := Interactable)

    SetupHUD(GameState:game_state, ParticipantID:string):game_hud=
        PropVM := GameState.GetStrProp(ResourceID, PropertyID, ParticipantID)
        LabelVM := gooey_string{}
        spawn. LabelVM.Init(Label)
        responsive_text_block:
            GooeyText := gooey_string. VM := Computed(LabelVM, PropVM, CombineString)
            TextBlock := WhiteText()
