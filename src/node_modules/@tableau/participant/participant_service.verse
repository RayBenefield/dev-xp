using { Tableau }
using { TableauProducer }

participant_service<public> := class(service):
    Repo<public>:participant_repository

    AddResources(ParticipantID:string, ResourceID:string, Count:num):[]domain_event=
        var DomainEvents:[]domain_event = array{}

        if (Participant := Repo.GetByID[ParticipantID]):
            NewParticipant := Participant.AddResources(ResourceID, Count)
            if (Repo.Update[NewParticipant]):
                set DomainEvents += array. Ev_ResourcesGained(Participant.ID, ResourceID)

        return DomainEvents
