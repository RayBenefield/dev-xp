using { Tableau }
using { TableauGenerator }

Ev_ResourcesGained<constructor>(ID:int) := domain_event:
    Entity := entity_participant{}
    EntityID := ID
    Event := ev_resources_gained{}

participant_service<public> := class(service):
    Repo<public>:participant_repository

    AddResources(ParticipantID:int, Count:num):[]domain_event=
        var DomainEvents:[]domain_event = array{}

        if (Participant := Repo.GetByID[ParticipantID]):
            NewParticipant := Participant.AddResources(Count)
            if (Repo.Update[NewParticipant]):
                set DomainEvents += array. Ev_ResourcesGained(Participant.ID)

        return DomainEvents