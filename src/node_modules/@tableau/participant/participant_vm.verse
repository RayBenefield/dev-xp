using { Tableau }

participant_vm<public> := class():
    ID<public>:string
    Agent<public>:gooey_agent = gooey_agent{}
    var Resources<public>:[string]gooey_string = map{}

    Init<public>(Participant:participant)<suspends>:void=
        spawn. Agent.Init(false)

    # TODO: Convert to `gooey_num` when we can map to `num->string` with Gooey
    AddResource<public>(ResID:string, Count:num)<suspends>:void =
        VM := gooey_string{}
        spawn. VM.Init("{Count}")
        if:
            set Resources[ResID] = VM
