using { /UnrealEngine.com/Temporary/Diagnostics }

using { Tableau }

participant_repository<public> := class<concrete>():
    Initial<public>:[]participant = array{}
    var Keyed:[string]participant = map{}

    block. Load(Initial)
    Load<public>(New:[]participant)<transacts>:void=
        if (New.Length = 0). return ProjectLog("Attempted to load Zero participants", log_level.Warning)
        set Keyed = map{}
        for (P:New). if (set Keyed[P.ID] = P) {}

    GetAll<public>():[]participant = for (P:Keyed). P
    GetByID<public>(ID:string)<decides><transacts>:participant = Keyed[ID]

    Update<public>(Participant:participant)<decides><transacts>:participant=
        GetByID[Participant.ID]
        set Keyed[Participant.ID] = Participant
