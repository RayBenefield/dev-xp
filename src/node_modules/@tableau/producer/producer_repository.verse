producer_repository<public> := class<concrete>():
    Initial<public>:[]producer = array{}
    var Keyed:[string]producer = map{}

    block. Load(Initial)
    Load<public>(New:[]producer)<transacts>:void=
        set Keyed = map{}
        for (G:New). if (set Keyed[G.ID] = G) {}

    GetAll<public>():[]producer = for(G:Keyed). G
    GetAllMapped<public>():[string]producer = Keyed
    GetByID<public>(ID:string)<decides><transacts>:producer = Keyed[ID]

    Update<public>(Prod:producer)<decides><transacts>:producer=
        GetByID[Prod.ID]
        set Keyed[Prod.ID] = Prod

    GetOwnedProducers<public>(OwnerID:string)<transacts>:[]producer=
        for (Producer:Keyed, Producer.GetCount(OwnerID) > 0). Producer

    OwnsProducer<public>(OwnerID:string, ProdID:string)<decides><transacts>:int=
        Prod := GetByID[ProdID]
        Count := Prod.GetCount(OwnerID)
        Count > 0