using { /Verse.org/Simulation }

phase<public> := enum:
    WarmUp
    Available

CopyWork<constructor>(Old:work)<transacts> := work:
    ID := Old.ID
    Phase := Old.Phase
    WarmUpDuration := Old.WarmUpDuration

work<public> := class<concrete>():
    @editable ID<public>:string = ""
    @editable Phase<public>:phase = phase.Available
    @editable WarmUpDuration<public>:float = 0.0

    StartWork<public>()<decides><transacts>:work =
        if (not IsAvailable[]). false?

        return work:
            CopyWork<constructor>(Self)
            Phase := phase.WarmUp

    CompleteWork<public>()<decides><transacts>:work =
        if (IsAvailable[]). false?

        return work:
            CopyWork<constructor>(Self)
            Phase := phase.Available

    IsAvailable<public>()<decides><transacts>:void = Phase = phase.Available
