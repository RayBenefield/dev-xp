import chalk from 'chalk'

const print = ({ label, color, values }) =>
    chalk`  {${color} ${label}${values.length}}`

export default results => {
    const skipped = {
        label: 'skipped:   ',
        color: 'white.bold',
        values: results.filter(result => result.skipped),
    }
    const passed = {
        label: 'passed:    ',
        color: 'green',
        values: results.filter(r => !r.skipped && r.snapshotMatched),
    }
    const added = {
        label: 'added:     ',
        color: 'green.bold',
        values: results.filter(r => !r.snapshotMatched && !r.previousSnapshot),
    }
    const failed = {
        label: 'failed:    ',
        color: 'red.bold',
        values: results.filter(r => !r.snapshotMatched && r.previousSnapshot),
    }
    return [skipped, added, failed].reduce(
        (all, curr) =>
            curr.values.length <= 0 ? all : chalk`${print(curr)}\n${all}`,
        print(passed)
    )
}
