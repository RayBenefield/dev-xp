import log from '@dev-xp/log'
import { Control } from 'rete'
import * as _ from '@dev-xp/utils'

export default (key, createProperties) => {
    // Rete does not like having Control as a constructor cuz it's "abstract"
    const NewComponent = Control
    NewComponent.prototype.constructor = 'Component'

    const self = new NewComponent(key)
    return _.$extend(self, createProperties(self))
}
