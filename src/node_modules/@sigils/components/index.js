import log from '@dev-xp/log'
import * as _ from '@dev-xp/utils'
import createComponent from '@sigils/create-component'
import numberComponent from '@sigils/number-component'

const types = {
    number: (readonly, bind) => (emitter, key) =>
        createComponent(key, control => ({
            component: numberComponent,
            props: { emitter, ikey: bind || key, readonly },
            setValue: val => {
                control.vueContext.value = val
            },
        })),
    string: readonly => (emitter, key) =>
        createComponent(key, control => ({
            component: numberComponent,
            props: { emitter, ikey: key, readonly },
            setValue: val => {
                control.vueContext.value = val
            },
        })),
}

export default _.mapObjIndexed(
    (create, componentName) => readonly => ({
        name: componentName,
        type: 'component',
        create: create(readonly),
    }),
    types
)
