import callsite from 'callsite';
import runWorkload from '@kape/run-workload';
import manageWorker from '@kape/manage-worker';

export default (...args) => {
    const isWorker = typeof process.send === 'function';
    const [suite] = args;
    const file = callsite()[1].getFileName();

    if (isWorker) return runWorkload({ file, suite, args });
    return manageWorker({ file, suite });
};
