import { tap, filter, skip } from 'rxjs/operators'

export default ({ moderator, logger }) =>
    moderator.currentCode$.pipe(
        skip(1),
        filter(({ code }) => code),
        tap(({ code }) => {
            moderator.message(
                'A new code for the next game is now available. Type [!code] to get the new code.'
            )
            logger.extend(`The new code [${code}] has been set.`)
        })
    )
