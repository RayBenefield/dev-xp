// eslint-disable-next-line complexity
export default (options = {}) => {
    const filters = []
    const { user, streamer, mod, sub } = options

    if (user !== undefined)
        filters.push(
            ({ userName }) =>
                user
                    ? userName.toLowerCase() === user.toLowerCase()
                    : userName.toLowerCase() !== user.toLowerCase()
        )

    if (streamer !== undefined)
        filters.push(
            ({ userRoles: roles }) =>
                streamer ? roles.includes('Owner') : !roles.includes('Owner')
        )

    if (mod !== undefined)
        filters.push(
            ({ userRoles }) =>
                mod ? userRoles.includes('Mod') : !userRoles.includes('Mod')
        )

    if (sub !== undefined)
        filters.push(
            ({ userRoles: r }) =>
                sub ? r.includes('Subscriber') : !r.includes('Subscriber')
        )

    return msg => filters.reduce((result, next) => next(msg) && result, true)
}
