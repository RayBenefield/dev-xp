import weighted from 'weighted'
import mapValues from 'lodash.mapvalues'

export default entrants => {
    const weights = mapValues(entrants, ({ entries }) => entries)
    const winner = weighted.select(weights)
    const total = (all = 0, { entries = 0 }) => entries + all

    return [
        {
            ...entrants[winner],
            candidates: Object.keys(entrants).length,
            allEntries: Object.values(entrants).reduce(total),
        },
    ]
}
