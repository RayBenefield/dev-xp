
using { /Fortnite.com/UI }
using { /UnrealEngine.com/Temporary/UI }

using { Goo }

gooey_stack_box<public> := class(gooey):
    VisibleGoo<public>:bool_goo = bool_goo. Latest := true
    Widgets<public>:[]widget = array{}
    Orientation<public>:orientation = orientation.Vertical
    Padding<public>:margin = margin{}
    HorizAlign<public>:horizontal_alignment = horizontal_alignment.Left

    Initialize<override>():widget=
        Box := stack_box:
            Orientation := Orientation
            Slots := for(Widget:Widgets):
                stack_box_slot:
                    Widget := Widget
                    Padding := Padding
                    HorizontalAlignment := HorizAlign
        spawn. KeepUpdated(Box)
        Box

    KeepUpdated(Box:stack_box)<suspends>:void=
        Box.SetVisibility(if (VisibleGoo.Latest?). widget_visibility.Visible else. widget_visibility.Collapsed)
        loop:
            if (1 = 0). break
            block:
                Visible := VisibleGoo.UpdatedEvent().Await()
                Box.SetVisibility(if (Visible?). widget_visibility.Visible else. widget_visibility.Collapsed)
