local rx, _ = require(script:GetCustomProperty('rx'))()

local count = 0

local event_ = rx.fromEvent('rx-test')
    .pipe({
        _.tap(function() count = count + 1 end),
        _.tap(function() print(count) end),
        _.take(3),
    }).subscribe(nil, nil, function() print('done') end)

Events.Broadcast('rx-test')
Events.Broadcast('rx-test')
Events.Broadcast('rx-test')
Events.Broadcast('rx-test')
Events.Broadcast('rx-test')
Events.Broadcast('rx-test')

-- local sub = rx.timer(500, 1000)
--     .pipe(
--         _.take(3),
--         _.map(function(val) return 'mapped: '..val end)
--     ).subscribe(print)

-- rx.observable.timer(2000).subscribe(nil, nil, function()
--     print('ending')
--     sub()
-- end)

--rx.observable.timer(3).subscribe(print)
