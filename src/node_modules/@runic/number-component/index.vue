<template>
    <input
        type="number"
        :readonly="readonly"
        :value="value"
        @input="change($event)"
        @dblclick.stop=""
        @pointerdown.stop=""
        @pointermove.stop=""
    />
</template>

<script>
export default {
    props: ['readonly', 'emitter', 'ikey', 'getData', 'putData'],
    data() {
        return { value: 0 }
    },
    methods: {
        change(e) {
            this.value = +e.target.value
            this.update()
        },
        update() {
            if (this.ikey) this.putData(this.ikey, this.value)
            this.emitter.trigger('process')
        },
    },
    mounted() {
        this.value = this.getData(this.ikey) || 0
        this.update()
    },
}
</script>

<style lang="sass" scoped>
input[type=number]
    width: 48px
    color: white
    border: 1px solid #fff
    padding: 2px 6px
    border-radius: 2px 2px 2px 2px
    -webkit-appearance: textfield
    -moz-appearance: textfield
    appearance: textfield
    box-sizing: border-box

input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button
    -webkit-appearance: none
</style>
