import { from } from 'rxjs'
import { tap } from 'rxjs/operators'
import createIntentEngine from '@rampant/engine'

const intentEngine = createIntentEngine()

from([
    {
        id: 'test',
        type: 'added',
        new: {
            name: 'test',
            sources: [{}],
            effects: [{ log: 'works' }, { log: 'other stuff' }],
        },
    },
    {
        id: 'secondTest',
        type: 'added',
        new: {
            name: 'secondTest',
            sources: [{}],
            effects: [{ log: 'from second' }],
        },
    },
])
    .pipe(
        tap(({ id, type, new: newValue }) => {
            if (type === 'added') intentEngine.addIntent(id, newValue)
        })
    )
    .subscribe(console.log)
