import { tap } from 'rxjs/operators'

export default ({ db }) => effect => {
    if (effect.db) {
        const { type = 'upsert', doc, data } = effect.db
        return tap(() => db[type](`projects/testing/custom-db/${doc}`, data))
    }

    // eslint-disable-next-line no-console
    if (effect.log) return tap(() => console.log(effect.log))

    return tap()
}
