import { map, tap } from 'rxjs/operators'
import templating from '@rampant/templating'

export default () => pipe => {
    if (pipe.type === 'static') {
        const render = templating.template(pipe.value)
        return map(payload => ({
            ...payload,
            context: {
                ...payload.context,
                [pipe.key]: render(payload.context),
            },
        }))
    }
    return tap(() => {})
}
