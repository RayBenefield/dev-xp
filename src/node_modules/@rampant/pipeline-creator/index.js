export default ({ plugins }) => pipe => {
    const extensionTypes = Object.values(plugins).reduce(
        (all, { extensions = {} }) => ({
            ...all,
            ...extensions,
        }),
        {}
    )

    const { type } = pipe
    const extensionCreator = extensionTypes[type]
    return extensionCreator(pipe)
}
